\hypertarget{gbsnd_8cpp_source}{}\doxysection{gbsnd.\+cpp}
\label{gbsnd_8cpp_source}\index{arm9/source/gbsnd.cpp@{arm9/source/gbsnd.cpp}}
\mbox{\hyperlink{gbsnd_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00001}00001\ \textcolor{comment}{//\ There\ are\ 2\ ways\ sound\ can\ be\ handled\ here.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00002}00002\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00003}00003\ \textcolor{comment}{//\ If\ "{}hyperSound"{}\ (aka\ "{}Sound\ Fix"{})\ is\ enabled,\ each\ piece\ of\ sound\ is}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00004}00004\ \textcolor{comment}{//\ synchronized\ with\ ds\ hardware.\ This\ allows\ for\ very\ accurate\ emulation\ of}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00005}00005\ \textcolor{comment}{//\ sound\ effects\ like\ Pikachu.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00006}00006\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00007}00007\ \textcolor{comment}{//\ If\ "{}hyperSound"{}\ is\ not\ enabled,\ sound\ is\ not\ synchronized\ to\ the\ cycle,\ it\ is}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00008}00008\ \textcolor{comment}{//\ simply\ played\ as\ soon\ as\ it\ is\ computed.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00010}00010\ \textcolor{preprocessor}{\#include\ <nds.h>}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00011}00011\ \textcolor{preprocessor}{\#include\ <nds/fifomessages.h>}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00012}00012\ \textcolor{preprocessor}{\#include\ <time.h>}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00013}00013\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{mmu_8h}{mmu.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00014}00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{console_8h}{console.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00015}00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{gameboy_8h}{gameboy.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00016}00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{gbsnd_8h}{gbsnd.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00017}00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{common_8h}{common.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00018}00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{gbcpu_8h}{gbcpu.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00020}\mbox{\hyperlink{gbsnd_8cpp_ade3fc9ebc37a6e3f5bbe33e4ccfde27f}{00020}}\ \textcolor{preprocessor}{\#define\ CHAN\_1\ 1}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00021}\mbox{\hyperlink{gbsnd_8cpp_a3c945d4ebfdeae4b483dab407753a85d}{00021}}\ \textcolor{preprocessor}{\#define\ CHAN\_2\ 2}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00022}\mbox{\hyperlink{gbsnd_8cpp_ac7dcd37333d0bc309c06c31b99e6790f}{00022}}\ \textcolor{preprocessor}{\#define\ CHAN\_3\ 4}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00023}\mbox{\hyperlink{gbsnd_8cpp_a5545112d67b69cd81aee836009cfaa8f}{00023}}\ \textcolor{preprocessor}{\#define\ CHAN\_4\ 8}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00025}\mbox{\hyperlink{gbsnd_8cpp_a67aeb1fe2daca5e42326df8b78512058}{00025}}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a67aeb1fe2daca5e42326df8b78512058}{setChan}}(\textcolor{keywordtype}{int}\ which)\ \{\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x26]\ |=\ which;\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00026}\mbox{\hyperlink{gbsnd_8cpp_a1ba110d7e8ef53c9251f4a5fd3472446}{00026}}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a1ba110d7e8ef53c9251f4a5fd3472446}{clearChan}}(\textcolor{keywordtype}{int}\ which)\ \{\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x26]\ \&=\ \string~which;\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00028}\mbox{\hyperlink{gbsnd_8h_aae56561200e090019d70871c72b8021d}{00028}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{gbsnd_8cpp_aae56561200e090019d70871c72b8021d}{soundDisabled}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00030}00030\ \textcolor{comment}{//\ NOTE:\ Don't\ check\ this\ variable\ to\ see\ if\ hyperSound\ is\ enabled.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00031}00031\ \textcolor{comment}{//\ Check\ sharedData-\/>hyperSound\ instead.\ It\ is\ enabled\ or\ disabled\ depending\ on}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00032}00032\ \textcolor{comment}{//\ the\ situation.\ For\ instance,\ it\ is\ disabled\ when\ fast\ forwarding.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00033}\mbox{\hyperlink{gbsnd_8h_a50dfa48cdca835c9eb754ea19006c3cf}{00033}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{gbsnd_8cpp_a50dfa48cdca835c9eb754ea19006c3cf}{hyperSound}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00035}\mbox{\hyperlink{gbsnd_8h_a2ba144de5af9053b300a9c09343c1e2f}{00035}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_a2ba144de5af9053b300a9c09343c1e2f}{cyclesToSoundEvent}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00037}\mbox{\hyperlink{gbsnd_8cpp_a4f11e9de416ac411cef0b2abc96203bb}{00037}}\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{gbsnd_8cpp_a4f11e9de416ac411cef0b2abc96203bb}{chan4FreqRatio}};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00038}\mbox{\hyperlink{gbsnd_8cpp_a48f30c0cd799871d23eaebd139f4a992}{00038}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_a48f30c0cd799871d23eaebd139f4a992}{chan1SweepTime}};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00039}\mbox{\hyperlink{gbsnd_8cpp_a36e0e70bba933777c0294e925c2fc1a2}{00039}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_a36e0e70bba933777c0294e925c2fc1a2}{chan1SweepCounter}};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00040}\mbox{\hyperlink{gbsnd_8cpp_a200d5013a02c13c0bbfb1b01baf7e510}{00040}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_a200d5013a02c13c0bbfb1b01baf7e510}{chan1SweepDir}};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00041}\mbox{\hyperlink{gbsnd_8cpp_abea3237ebe8d9431cd685f91fbb7b338}{00041}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_abea3237ebe8d9431cd685f91fbb7b338}{chan1SweepAmount}};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00042}\mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{00042}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[4];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00043}\mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{00043}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[4];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00044}\mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{00044}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[4];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00045}\mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{00045}}\ u32\ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[4];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00046}\mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{00046}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[4];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00047}\mbox{\hyperlink{gbsnd_8cpp_ad05d382a1534d6cb0c696e640541d9dc}{00047}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_ad05d382a1534d6cb0c696e640541d9dc}{chanEnvDir}}[4];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00048}\mbox{\hyperlink{gbsnd_8cpp_a694186de2b751508e31cd509cda17059}{00048}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_a694186de2b751508e31cd509cda17059}{chanEnvCounter}}[4];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00049}\mbox{\hyperlink{gbsnd_8cpp_abe105cb88cdba915e620915ac066b40a}{00049}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_abe105cb88cdba915e620915ac066b40a}{chanEnvSweep}}[4];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00051}\mbox{\hyperlink{gbsnd_8cpp_ad1435551a6a2d905ea84ac0f5c83c6bf}{00051}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gbsnd_8cpp_ad1435551a6a2d905ea84ac0f5c83c6bf}{pcmVals}}[16];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00052}\mbox{\hyperlink{gbsnd_8cpp_a729aba179048e4101fe801abf20cfb89}{00052}}\ u8\ *\textcolor{keyword}{const}\ \mbox{\hyperlink{gbsnd_8cpp_a729aba179048e4101fe801abf20cfb89}{sampleData}}\ =\ (u8\ *)memUncached(malloc(0x20));}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00054}\mbox{\hyperlink{gbsnd_8cpp_acd01f191f2a77c4af00347d7f75106d9}{00054}}\ \textcolor{keyword}{const}\ DutyCycle\ \mbox{\hyperlink{gbsnd_8cpp_acd01f191f2a77c4af00347d7f75106d9}{dutyIndex}}[4]\ =\ \{DutyCycle\_12,\ DutyCycle\_25,\ DutyCycle\_50,\ DutyCycle\_75\};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00056}00056\ \textcolor{comment}{//\ If\ this\ many\ fifo\ commands\ have\ been\ sent\ but\ not\ received,\ skip\ further}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00057}00057\ \textcolor{comment}{//\ commands.\ This\ helps\ prevent\ crashing.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00058}\mbox{\hyperlink{gbsnd_8cpp_afcdba106ecfa7a82f4c19058b031102d}{00058}}\ \textcolor{preprocessor}{\#define\ MAX\_FIFOS\_WAITING\ 60}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00060}\mbox{\hyperlink{gbsnd_8cpp_a9b211ffbe4ade11d61199e4db1972a12}{00060}}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a9b211ffbe4ade11d61199e4db1972a12}{FIFO\_SEND}}(u32\ message)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00061}00061\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00062}00062\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a47b59e2df77853e1827c4b6d990c0e67}{fifosSent}}\ -\/\ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a9908c044a6a457f71fabb131e8621151}{fifosReceived}}\ <\ \mbox{\hyperlink{gbsnd_8cpp_afcdba106ecfa7a82f4c19058b031102d}{MAX\_FIFOS\_WAITING}})}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00063}00063\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00064}00064\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a47b59e2df77853e1827c4b6d990c0e67}{fifosSent}}++;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00065}00065\ \ \ \ \ \ \ \ \ fifoSendValue32(FIFO\_USER\_01,\ message);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00066}00066\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00067}00067\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00068}00068\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00069}00069\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{console_8h_a62de465465602ecf44e199d8e1dc876a}{printLog}}(\textcolor{stringliteral}{"{}Sound\ error\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00070}00070\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00071}00071\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00073}00073\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a1a55198838249003f8701c19dea17194}{refreshSoundVolume}}(\textcolor{keywordtype}{int}\ i,\ \textcolor{keywordtype}{bool}\ send\ =\ \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00074}00074\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_adf1000445c720d5ba7d7c01fdc06d8e0}{refreshSoundFreq}}(\textcolor{keywordtype}{int}\ i);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00075}00075\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8h_adf56904dd8cd20559b11887998ce5e88}{updateSoundSample}}(\textcolor{keywordtype}{int}\ \textcolor{keywordtype}{byte});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00077}00077\ \textcolor{comment}{//\ If\ Sound\ Fix\ is\ enabled,\ enter\ a\ loop\ until\ exactly\ the\ right\ moment\ at\ which}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00078}00078\ \textcolor{comment}{//\ the\ sound\ should\ be\ updated.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00079}00079\ \textcolor{comment}{//\ NOTE:\ scale\ transfer,\ which\ is\ done\ by\ arm7,\ tends\ to\ interfere\ with\ this.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00080}\mbox{\hyperlink{gbsnd_8cpp_ae1628796a048234ed903fb79221a6611}{00080}}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_ae1628796a048234ed903fb79221a6611}{synchronizeSound}}()}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00081}00081\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00082}00082\ \ \ \ \ \textcolor{keywordtype}{int}\ cycles\ =\ (\mbox{\hyperlink{gameboy_8h_a720cda0344a935ff996a881c1c06bf8f}{cyclesSinceVblank}}\ +\ \mbox{\hyperlink{gbcpu_8h_ae74afa8626d5b0f9a7ebcfd329561ef5}{extraCycles}})\ >>\ \mbox{\hyperlink{gameboy_8h_a308cf5bd4714c05f9f309a73bcda9108}{doubleSpeed}};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00083}00083\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_acb46bb7d12888b018e4befc95c981ca0}{hyperSound}}\ \&\&}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00084}00084\ \ \ \ \ \ \ \ \ (!\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_ad9aa2a8dd98de663ae9e21874bd5f7c3}{scaleTransferReady}})\ \&\&\ \textcolor{comment}{//\ Scale\ transfer\ eats\ up\ a\ lot\ of\ arm7's\ time}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00085}00085\ \ \ \ \ \ \ \ \ !(\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a375385b4dc726b4c0edae7a2b438ce48}{frameFlip\_Gameboy}}\ !=\ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_afed8946bd180371ec758e171fabdb7ca}{frameFlip\_DS}}\ ||\ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a03170f2fb237b34a50174fedc41679c1}{dsCycles}}\ >=\ cycles))}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00086}00086\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00088}00088\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a40eebec5b7b5809ca80882aa2cb4fdf5}{cycles}}\ =\ cycles;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00089}00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a40eebec5b7b5809ca80882aa2cb4fdf5}{cycles}}\ !=\ -\/1)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00090}00090\ \ \ \ \ \ \ \ \ \{\ \textcolor{comment}{//\ Wait\ for\ arm7\ to\ set\ sharedData-\/>cycles.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_ad9aa2a8dd98de663ae9e21874bd5f7c3}{scaleTransferReady}})}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ \{\ \textcolor{comment}{//\ Is\ arm7\ doing\ the\ scale\ transfer?\ If\ so\ ABORT}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a40eebec5b7b5809ca80882aa2cb4fdf5}{cycles}}\ =\ -\/1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ sendByFifo;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00096}00096\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00097}00097\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00098}00098\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00099}00099\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00100}00100\ \ \ \ \ sendByFifo:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00101}00101\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a9b211ffbe4ade11d61199e4db1972a12}{FIFO\_SEND}}(\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_aa8d0c908d751e0355e64e00dba2108d5}{message}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00102}00102\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00103}00103\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00104}00104\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00105}\mbox{\hyperlink{gbsnd_8cpp_a86bf1099be9bd9d1d0e29792d19cffef}{00105}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a86bf1099be9bd9d1d0e29792d19cffef}{sendStartMessage}}(\textcolor{keywordtype}{int}\ i)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00106}00106\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00107}00107\ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_aa8d0c908d751e0355e64e00dba2108d5}{message}}\ =\ \mbox{\hyperlink{common_8h_a16af7b253440dadd46a80a4b9fddba4da1e083155fe2dd9ea1eefa5cfd3de50dc}{GBSND\_START\_COMMAND}}\ <<\ 20\ |\ i;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00108}00108\ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae1628796a048234ed903fb79221a6611}{synchronizeSound}}();}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00109}00109\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00110}00110\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00111}\mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{00111}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(\textcolor{keywordtype}{int}\ i)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00112}00112\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00113}00113\ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ -\/1)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00114}00114\ \ \ \ \ \ \ \ \ i\ =\ 4;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00115}00115\ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_aa8d0c908d751e0355e64e00dba2108d5}{message}}\ =\ \mbox{\hyperlink{common_8h_a16af7b253440dadd46a80a4b9fddba4da728a02468e0f9fc5117ec4051f61c6bb}{GBSND\_UPDATE\_COMMAND}}\ <<\ 20\ |\ i;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00116}00116\ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae1628796a048234ed903fb79221a6611}{synchronizeSound}}();}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00117}00117\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00119}\mbox{\hyperlink{gbsnd_8cpp_a080ae19c86b09346d784904b475e6a9b}{00119}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a080ae19c86b09346d784904b475e6a9b}{sendGlobalVolumeMessage}}()}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00120}00120\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00121}00121\ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_aa8d0c908d751e0355e64e00dba2108d5}{message}}\ =\ \mbox{\hyperlink{common_8h_a16af7b253440dadd46a80a4b9fddba4da2b3f05a4638c05afad03242c0e376ea2}{GBSND\_MASTER\_VOLUME\_COMMAND}}\ <<\ 20;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00122}00122\ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae1628796a048234ed903fb79221a6611}{synchronizeSound}}();}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00123}00123\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00124}00124\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00125}\mbox{\hyperlink{gbsnd_8cpp_a04955e31135de1385d2ad25880e21dfe}{00125}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a04955e31135de1385d2ad25880e21dfe}{refreshSoundPan}}(\textcolor{keywordtype}{int}\ i)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00126}00126\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00127}00127\ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_ad17b2ef59c3309fdb7e6ec80575dae5c}{chanOutput}}\ \&\ (1\ <<\ i))\ \&\&\ (\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_ad17b2ef59c3309fdb7e6ec80575dae5c}{chanOutput}}\ \&\ (1\ <<\ (i\ +\ 4))))}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00128}00128\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a5d8f6fd81997d4bf2e51d2b6a700e30b}{chanPan}}[i]\ =\ 64;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00129}00129\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_ad17b2ef59c3309fdb7e6ec80575dae5c}{chanOutput}}\ \&\ (1\ <<\ i))}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00130}00130\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a5d8f6fd81997d4bf2e51d2b6a700e30b}{chanPan}}[i]\ =\ 127;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00131}00131\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_ad17b2ef59c3309fdb7e6ec80575dae5c}{chanOutput}}\ \&\ (1\ <<\ (i\ +\ 4)))}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00132}00132\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a5d8f6fd81997d4bf2e51d2b6a700e30b}{chanPan}}[i]\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00133}00133\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00134}00134\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00135}00135\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a5d8f6fd81997d4bf2e51d2b6a700e30b}{chanPan}}[i]\ =\ 128;\ \textcolor{comment}{//\ Special\ signal}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00136}00136\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00137}00137\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00138}00138\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00139}\mbox{\hyperlink{gbsnd_8cpp_a1a55198838249003f8701c19dea17194}{00139}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a1a55198838249003f8701c19dea17194}{refreshSoundVolume}}(\textcolor{keywordtype}{int}\ i,\ \textcolor{keywordtype}{bool}\ send)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00140}00140\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00141}00141\ \ \ \ \ \textcolor{keywordflow}{if}\ (!(\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ \&\ (1\ <<\ i))\ ||\ !\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_aeb33df75b64eb91d40147ece8def08a0}{chanEnabled}}[i])}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00142}00142\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00143}00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00144}00144\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00145}00145\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00146}00146\ \ \ \ \ \textcolor{keywordtype}{int}\ volume\ =\ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[i];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00147}00147\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00148}00148\ \ \ \ \ \textcolor{keywordflow}{if}\ (send\ \&\&\ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_ac605d4c380c0f0552376a2521894870a}{chanRealVol}}[i]\ !=\ volume)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00149}00149\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00150}00150\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_ac605d4c380c0f0552376a2521894870a}{chanRealVol}}[i]\ =\ volume;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00151}00151\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_aa8d0c908d751e0355e64e00dba2108d5}{message}}\ =\ \mbox{\hyperlink{common_8h_a16af7b253440dadd46a80a4b9fddba4da109a8aa28daacd354c41dc6764ad7e00}{GBSND\_VOLUME\_COMMAND}}\ <<\ 20\ |\ i;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00152}00152\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae1628796a048234ed903fb79221a6611}{synchronizeSound}}();}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00153}00153\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00154}00154\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00155}00155\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_ac605d4c380c0f0552376a2521894870a}{chanRealVol}}[i]\ =\ volume;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00156}00156\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00157}00157\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00158}\mbox{\hyperlink{gbsnd_8cpp_adf1000445c720d5ba7d7c01fdc06d8e0}{00158}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_adf1000445c720d5ba7d7c01fdc06d8e0}{refreshSoundFreq}}(\textcolor{keywordtype}{int}\ i)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00159}00159\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00160}00160\ \ \ \ \ \textcolor{keywordtype}{int}\ freq\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00161}00161\ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ <=\ 1)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00162}00162\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00163}00163\ \ \ \ \ \ \ \ \ freq\ =\ 131072\ /\ (2048\ -\/\ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[i])\ *\ 8;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00164}00164\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00165}00165\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (i\ ==\ 2)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00166}00166\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00167}00167\ \ \ \ \ \ \ \ \ freq\ =\ 65536\ /\ (2048\ -\/\ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[i])\ *\ 32;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00168}00168\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00169}00169\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (i\ ==\ 3)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00170}00170\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00171}00171\ \ \ \ \ \ \ \ \ freq\ =\ (int)(524288\ /\ \mbox{\hyperlink{gbsnd_8cpp_a4f11e9de416ac411cef0b2abc96203bb}{chan4FreqRatio}})\ >>\ (\mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[i]\ +\ 1);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00172}00172\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ freq\ =\ 0xaaa;}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00173}00173\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ printLog("{}\%.2x:\ Freq\ \%x\(\backslash\)n"{},\ ioRam[0x22],\ freq);}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00174}00174\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00175}00175\ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a6e18f86fe6c9136a69a01e8b638b5ea6}{chanRealFreq}}[i]\ =\ freq;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00176}00176\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00177}00177\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00178}\mbox{\hyperlink{gbsnd_8cpp_a1438f597aa6f9aa7fad5424f81121743}{00178}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a1438f597aa6f9aa7fad5424f81121743}{refreshSoundDuty}}(\textcolor{keywordtype}{int}\ i)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00179}00179\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00180}00180\ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ \&\ (1\ <<\ i)))}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00181}00181\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00182}00182\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00183}00183\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00184}00184\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00185}\mbox{\hyperlink{gbsnd_8h_a15114ef6911222770c38408ae365c6bd}{00185}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a15114ef6911222770c38408ae365c6bd}{initSND}}()}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00186}00186\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00187}00187\ \ \ \ \ \textcolor{comment}{//\ Send\ the\ cached\ mirror\ to\ preserve\ dsi\ compatibility.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00188}00188\ \ \ \ \ \textcolor{comment}{//\ Because\ of\ this,\ on\ arm9,\ always\ use\ the\ local\ sampleData\ which\ is}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00189}00189\ \ \ \ \ \textcolor{comment}{//\ uncached.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00190}00190\ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a127281bde836c9c2fb579261ddbe53e7}{sampleData}}\ =\ (u8\ *)memCached(\mbox{\hyperlink{gbsnd_8cpp_a729aba179048e4101fe801abf20cfb89}{sampleData}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00191}00191\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0x27;\ i\ <=\ 0x2f;\ i++)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00192}00192\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[i]\ =\ 0xff;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00193}00193\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00194}00194\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x26]\ =\ 0xf0;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00195}00195\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00196}00196\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x10]\ =\ 0x80;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00197}00197\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x11]\ =\ 0xBF;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00198}00198\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x12]\ =\ 0xF3;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00199}00199\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x14]\ =\ 0xBF;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00200}00200\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x16]\ =\ 0x3F;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00201}00201\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x17]\ =\ 0x00;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00202}00202\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x19]\ =\ 0xbf;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00203}00203\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x1a]\ =\ 0x7f;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00204}00204\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x1b]\ =\ 0xff;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00205}00205\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x1c]\ =\ 0x9f;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00206}00206\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x1e]\ =\ 0xbf;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00207}00207\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x20]\ =\ 0xff;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00208}00208\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x21]\ =\ 0x00;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00209}00209\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x22]\ =\ 0x00;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00210}00210\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x23]\ =\ 0xbf;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00211}00211\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x24]\ =\ 0x77;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00212}00212\ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x25]\ =\ 0xf3;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00213}00213\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00214}00214\ \ \ \ \ \textcolor{comment}{//\ Initial\ values\ for\ the\ waveform\ are\ random\ among\ gameboys.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00215}00215\ \ \ \ \ \textcolor{comment}{//\ These\ values\ are\ the\ defaults\ for\ the\ GBC.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00216}00216\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 0x10;\ i\ +=\ 2)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00217}00217\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x30\ +\ i]\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00218}00218\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 1;\ i\ <\ 0x10;\ i\ +=\ 2)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00219}00219\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x30\ +\ i]\ =\ 0xff;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00220}00220\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00221}00221\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{double}\ analog[]\ =\ \{-\/1,\ -\/0.8667,\ -\/0.7334,\ -\/0.6,\ -\/0.4668,\ -\/0.3335,\ -\/0.2,\ -\/0.067,\ 0.0664,\ 0.2,\ 0.333,\ 0.4668,\ 0.6,\ 0.7334,\ 0.8667,\ 1\};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00222}00222\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00223}00223\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ 16;\ i++)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00224}00224\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00225}00225\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ad1435551a6a2d905ea84ac0f5c83c6bf}{pcmVals}}[i]\ =\ analog[i]\ *\ 0x70;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00226}00226\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00227}00227\ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a9976c541af3380f744dfaa004ff82fff}{refreshSND}}();}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00228}00228\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00229}00229\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00230}\mbox{\hyperlink{gbsnd_8h_a9976c541af3380f744dfaa004ff82fff}{00230}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a9976c541af3380f744dfaa004ff82fff}{refreshSND}}()}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00231}00231\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00232}00232\ \ \ \ \ soundEnable();}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00233}00233\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_aae56561200e090019d70871c72b8021d}{soundDisabled}})}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00234}00234\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00235}00235\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00236}00236\ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00237}00237\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00238}00238\ \ \ \ \ \textcolor{comment}{//\ Ordering\ note:\ Writing\ a\ byte\ to\ FF26\ with\ bit\ 7\ set\ enables\ writes\ to}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00239}00239\ \ \ \ \ \textcolor{comment}{//\ the\ other\ registers.\ With\ bit\ 7\ unset,\ writes\ are\ ignored.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00240}00240\ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a01fc1036f2f8d4a5d368abdcbc3172b0}{handleSoundRegister}}(0x26,\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x26]);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00241}00241\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00242}00242\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0x10;\ i\ <=\ 0x3F;\ i++)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00243}00243\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00244}00244\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ 0x14\ ||\ i\ ==\ 0x19\ ||\ i\ ==\ 0x1e\ ||\ i\ ==\ 0x23)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00245}00245\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Don't\ restart\ the\ sound\ channels.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00246}00246\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a01fc1036f2f8d4a5d368abdcbc3172b0}{handleSoundRegister}}(i,\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[i]\ \&\ \string~0x80);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00247}00247\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00248}00248\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a01fc1036f2f8d4a5d368abdcbc3172b0}{handleSoundRegister}}(i,\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[i]);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00249}00249\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00250}00250\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00251}00251\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x26]\ \&\ 1)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00252}00252\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a01fc1036f2f8d4a5d368abdcbc3172b0}{handleSoundRegister}}(0x14,\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x14]\ |\ 0x80);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00253}00253\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x26]\ \&\ 2)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00254}00254\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a01fc1036f2f8d4a5d368abdcbc3172b0}{handleSoundRegister}}(0x19,\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x19]\ |\ 0x80);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00255}00255\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x26]\ \&\ 4)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00256}00256\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a01fc1036f2f8d4a5d368abdcbc3172b0}{handleSoundRegister}}(0x1e,\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x1e]\ |\ 0x80);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00257}00257\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x26]\ \&\ 8)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00258}00258\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a01fc1036f2f8d4a5d368abdcbc3172b0}{handleSoundRegister}}(0x23,\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x23]\ |\ 0x80);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00259}00259\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00260}00260\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00261}\mbox{\hyperlink{gbsnd_8h_a7fab9e8cae567ef9c79b711b29909ffb}{00261}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a7fab9e8cae567ef9c79b711b29909ffb}{muteSND}}()}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00262}00262\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00263}00263\ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a47b59e2df77853e1827c4b6d990c0e67}{fifosSent}}++;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00264}00264\ \ \ \ \ fifoSendValue32(FIFO\_USER\_01,\ \mbox{\hyperlink{common_8h_a16af7b253440dadd46a80a4b9fddba4da53c6d107a23f87bbbb93f4ef2b1848fb}{GBSND\_MUTE\_COMMAND}}\ <<\ 20);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00265}00265\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00266}\mbox{\hyperlink{gbsnd_8h_ae7ca78c77d7dc2018984e5dfe67c87eb}{00266}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_ae7ca78c77d7dc2018984e5dfe67c87eb}{unmuteSND}}()}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00267}00267\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00268}00268\ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a47b59e2df77853e1827c4b6d990c0e67}{fifosSent}}++;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00269}00269\ \ \ \ \ fifoSendValue32(FIFO\_USER\_01,\ \mbox{\hyperlink{common_8h_a16af7b253440dadd46a80a4b9fddba4da0af37510ab11b9a45cf5dc6d5a550d03}{GBSND\_UNMUTE\_COMMAND}}\ <<\ 20);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00270}00270\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00271}00271\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00272}\mbox{\hyperlink{gbsnd_8h_a13eb2198e9ee530dad6418c946532107}{00272}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a13eb2198e9ee530dad6418c946532107}{enableChannel}}(\textcolor{keywordtype}{int}\ i)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00273}00273\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00274}00274\ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_aeb33df75b64eb91d40147ece8def08a0}{chanEnabled}}[i]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00275}00275\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00276}\mbox{\hyperlink{gbsnd_8h_af5b52e2c3b98aea62890a5f5bad27552}{00276}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_af5b52e2c3b98aea62890a5f5bad27552}{disableChannel}}(\textcolor{keywordtype}{int}\ i)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00277}00277\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00278}00278\ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_aeb33df75b64eb91d40147ece8def08a0}{chanEnabled}}[i]\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00279}00279\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00280}00280\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00281}\mbox{\hyperlink{gbsnd_8cpp_a6d1af3c3dd29b218dfec9b2661137e5e}{00281}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8h_adf56904dd8cd20559b11887998ce5e88}{updateSoundSample}}(\textcolor{keywordtype}{int}\ \textcolor{keywordtype}{byte})}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00282}00282\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00283}00283\ \ \ \ \ u8\ sample\ =\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x30\ +\ byte];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00284}00284\ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a729aba179048e4101fe801abf20cfb89}{sampleData}}[\textcolor{keywordtype}{byte}\ *\ 2]\ =\ \mbox{\hyperlink{gbsnd_8cpp_ad1435551a6a2d905ea84ac0f5c83c6bf}{pcmVals}}[sample\ >>\ 4];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00285}00285\ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a729aba179048e4101fe801abf20cfb89}{sampleData}}[\textcolor{keywordtype}{byte}\ *\ 2\ +\ 1]\ =\ \mbox{\hyperlink{gbsnd_8cpp_ad1435551a6a2d905ea84ac0f5c83c6bf}{pcmVals}}[sample\ \&\ 0xf];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00286}00286\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00287}00287\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00288}\mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{00288}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\textcolor{keywordtype}{int}\ cycles)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00289}00289\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00290}00290\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_a2ba144de5af9053b300a9c09343c1e2f}{cyclesToSoundEvent}}\ >\ cycles)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00291}00291\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00292}00292\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a2ba144de5af9053b300a9c09343c1e2f}{cyclesToSoundEvent}}\ =\ cycles;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00293}00293\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gameboy_8h_a3ef8a2a072dece30a5ed04aa84c3bdc0}{setEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a2ba144de5af9053b300a9c09343c1e2f}{cyclesToSoundEvent}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00294}00294\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00295}00295\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00296}00296\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00297}00297\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a37529cb105bb1a74d33d4930f87f4a3f}{updateSound}}(\textcolor{keywordtype}{int}\ cycles)\ ITCM\_CODE;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00298}00298\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00299}\mbox{\hyperlink{gbsnd_8h_a1840a3078560b98a286226ca593d69e6}{00299}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a37529cb105bb1a74d33d4930f87f4a3f}{updateSound}}(\textcolor{keywordtype}{int}\ cycles)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00300}00300\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00301}00301\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_aae56561200e090019d70871c72b8021d}{soundDisabled}})}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00302}00302\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00303}00303\ \ \ \ \ \textcolor{keywordtype}{bool}\ changed\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00304}00304\ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ \&\ \mbox{\hyperlink{gbsnd_8cpp_ade3fc9ebc37a6e3f5bbe33e4ccfde27f}{CHAN\_1}})\ \&\&\ \mbox{\hyperlink{gbsnd_8cpp_a48f30c0cd799871d23eaebd139f4a992}{chan1SweepTime}}\ !=\ 0)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00305}00305\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00306}00306\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a36e0e70bba933777c0294e925c2fc1a2}{chan1SweepCounter}}\ -\/=\ cycles;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00307}00307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{gbsnd_8cpp_a36e0e70bba933777c0294e925c2fc1a2}{chan1SweepCounter}}\ <=\ 0)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00308}00308\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00309}00309\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a36e0e70bba933777c0294e925c2fc1a2}{chan1SweepCounter}}\ +=\ (\mbox{\hyperlink{global_8h_acacf3ae89ab776bea579de1a985750fb}{clockSpeed}}\ /\ (128\ /\ \mbox{\hyperlink{gbsnd_8cpp_a48f30c0cd799871d23eaebd139f4a992}{chan1SweepTime}}))\ +\ \mbox{\hyperlink{gbsnd_8cpp_a36e0e70bba933777c0294e925c2fc1a2}{chan1SweepCounter}};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00310}00310\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[0]\ +=\ (\mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[0]\ >>\ \mbox{\hyperlink{gbsnd_8cpp_abea3237ebe8d9431cd685f91fbb7b338}{chan1SweepAmount}})\ *\ \mbox{\hyperlink{gbsnd_8cpp_a200d5013a02c13c0bbfb1b01baf7e510}{chan1SweepDir}};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00311}00311\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[0]\ >\ 0x7FF)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00312}00312\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00313}00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ \&=\ \string~CHAN\_1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00314}00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1ba110d7e8ef53c9251f4a5fd3472446}{clearChan}}(\mbox{\hyperlink{gbsnd_8cpp_ade3fc9ebc37a6e3f5bbe33e4ccfde27f}{CHAN\_1}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00315}00315\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00316}00316\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00317}00317\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00318}00318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_adf1000445c720d5ba7d7c01fdc06d8e0}{refreshSoundFreq}}(0);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00319}00319\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00320}00320\ \ \ \ \ \ \ \ \ \ \ \ \ changed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00321}00321\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00322}00322\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00323}00323\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ \&\ \mbox{\hyperlink{gbsnd_8cpp_ade3fc9ebc37a6e3f5bbe33e4ccfde27f}{CHAN\_1}})}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00324}00324\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a36e0e70bba933777c0294e925c2fc1a2}{chan1SweepCounter}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00325}00325\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00326}00326\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 4;\ i++)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00327}00327\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00328}00328\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ !=\ 2\ \&\&\ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ \&\ (1\ <<\ i))}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00329}00329\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00330}00330\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_abe105cb88cdba915e620915ac066b40a}{chanEnvSweep}}[i]\ !=\ 0)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00331}00331\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00332}00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a694186de2b751508e31cd509cda17059}{chanEnvCounter}}[i]\ -\/=\ cycles;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00333}00333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{gbsnd_8cpp_a694186de2b751508e31cd509cda17059}{chanEnvCounter}}[i]\ <=\ 0)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00334}00334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00335}00335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a694186de2b751508e31cd509cda17059}{chanEnvCounter}}[i]\ +=\ \mbox{\hyperlink{gbsnd_8cpp_abe105cb88cdba915e620915ac066b40a}{chanEnvSweep}}[i]\ *\ \mbox{\hyperlink{global_8h_acacf3ae89ab776bea579de1a985750fb}{clockSpeed}}\ /\ 64;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00336}00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[i]\ +=\ \mbox{\hyperlink{gbsnd_8cpp_ad05d382a1534d6cb0c696e640541d9dc}{chanEnvDir}}[i];}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00337}00337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[i]\ <\ 0)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00338}00338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[i]\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00339}00339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[i]\ >\ 0xF)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00340}00340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[i]\ =\ 0xF;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00341}00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ changed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00342}00342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1a55198838249003f8701c19dea17194}{refreshSoundVolume}}(i);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00343}00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00344}00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[i]\ !=\ 0\ \&\&\ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[i]\ !=\ 0xF)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00345}00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a694186de2b751508e31cd509cda17059}{chanEnvCounter}}[i]);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00346}00346\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00347}00347\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00348}00348\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00349}00349\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 4;\ i++)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00350}00350\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00351}00351\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ \&\ (1\ <<\ i))\ \&\&\ \mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[i])}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00352}00352\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00353}00353\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[i]\ -\/=\ cycles;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00354}00354\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[i]\ <=\ 0)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00355}00355\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00356}00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ \&=\ \string~(1\ <<\ i);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00357}00357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ changed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00358}00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00359}00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1ba110d7e8ef53c9251f4a5fd3472446}{clearChan}}(\mbox{\hyperlink{gbsnd_8cpp_ade3fc9ebc37a6e3f5bbe33e4ccfde27f}{CHAN\_1}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00360}00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (i\ ==\ 1)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00361}00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1ba110d7e8ef53c9251f4a5fd3472446}{clearChan}}(\mbox{\hyperlink{gbsnd_8cpp_a3c945d4ebfdeae4b483dab407753a85d}{CHAN\_2}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00362}00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (i\ ==\ 2)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00363}00363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1ba110d7e8ef53c9251f4a5fd3472446}{clearChan}}(\mbox{\hyperlink{gbsnd_8cpp_ac7dcd37333d0bc309c06c31b99e6790f}{CHAN\_3}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00364}00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00365}00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1ba110d7e8ef53c9251f4a5fd3472446}{clearChan}}(\mbox{\hyperlink{gbsnd_8cpp_a5545112d67b69cd81aee836009cfaa8f}{CHAN\_4}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00366}00366\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00367}00367\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00368}00368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[i]);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00369}00369\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00370}00370\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00371}00371\ \ \ \ \ \textcolor{keywordflow}{if}\ (changed)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00372}00372\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00373}00373\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_a50dfa48cdca835c9eb754ea19006c3cf}{hyperSound}})}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00374}00374\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(-\/1);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00375}00375\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00376}00376\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00377}00377\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Force\ immediate\ update,\ even\ though\ hyperSound\ isn't\ on.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00378}00378\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a9b211ffbe4ade11d61199e4db1972a12}{FIFO\_SEND}}(\mbox{\hyperlink{common_8h_a16af7b253440dadd46a80a4b9fddba4da728a02468e0f9fc5117ec4051f61c6bb}{GBSND\_UPDATE\_COMMAND}}\ <<\ 28\ |\ 4);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00379}00379\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00380}00380\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00381}00381\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00382}00382\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00383}\mbox{\hyperlink{gbsnd_8h_a53ffcff16dfc65575d8e7031e3f3bbb0}{00383}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a53ffcff16dfc65575d8e7031e3f3bbb0}{soundUpdateVBlank}}()}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00384}00384\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00385}00385\ \ \ \ \ \textcolor{comment}{//\ This\ debug\ stuff\ helps\ when\ debugging\ Pokemon\ Diamond}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00386}00386\ \ \ \ \ \textcolor{comment}{//\ printLog("{}\%d\(\backslash\)n"{},\ sharedData-\/>fifosSent-\/sharedData-\/>fifosReceived);}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00387}00387\ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00388}00388\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00389}\mbox{\hyperlink{gbsnd_8h_a01fc1036f2f8d4a5d368abdcbc3172b0}{00389}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{gbsnd_8cpp_a01fc1036f2f8d4a5d368abdcbc3172b0}{handleSoundRegister}}(u8\ ioReg,\ u8\ val)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00390}00390\ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00391}00391\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_aae56561200e090019d70871c72b8021d}{soundDisabled}})}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00392}00392\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00393}00393\ \ \ \ \ \textcolor{comment}{//\ If\ sound\ is\ globally\ disabled\ via\ shutting\ down\ the\ APU,}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00394}00394\ \ \ \ \ \textcolor{keywordflow}{if}\ (!(\mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x26]\ \&\ 0x80)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00395}00395\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ignore\ register\ writes\ to\ between\ FF10\ and\ FF25\ inclusive.}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00396}00396\ \ \ \ \ \ \ \ \ \&\&\ ioReg\ >=\ 0x10\ \&\&\ ioReg\ <=\ 0x25)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00397}00397\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00398}00398\ \ \ \ \ \textcolor{keywordflow}{switch}\ (ioReg)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00399}00399\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00400}00400\ \ \ \ \ \textcolor{comment}{//\ CHANNEL\ 1}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00401}00401\ \ \ \ \ \textcolor{comment}{//\ Sweep}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00402}00402\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x10:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00403}00403\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a48f30c0cd799871d23eaebd139f4a992}{chan1SweepTime}}\ =\ (val\ >>\ 4)\ \&\ 0x7;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00404}00404\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_a48f30c0cd799871d23eaebd139f4a992}{chan1SweepTime}}\ !=\ 0)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00405}00405\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00406}00406\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a36e0e70bba933777c0294e925c2fc1a2}{chan1SweepCounter}}\ =\ \mbox{\hyperlink{global_8h_acacf3ae89ab776bea579de1a985750fb}{clockSpeed}}\ /\ (128\ /\ \mbox{\hyperlink{gbsnd_8cpp_a48f30c0cd799871d23eaebd139f4a992}{chan1SweepTime}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00407}00407\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a36e0e70bba933777c0294e925c2fc1a2}{chan1SweepCounter}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00408}00408\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00409}00409\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a200d5013a02c13c0bbfb1b01baf7e510}{chan1SweepDir}}\ =\ (val\ \&\ 0x8)\ ?\ -\/1\ :\ 1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00410}00410\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_abea3237ebe8d9431cd685f91fbb7b338}{chan1SweepAmount}}\ =\ (val\ \&\ 0x7);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00411}00411\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x10]\ =\ val\ |\ 0x80;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00412}00412\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00413}00413\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Length\ /\ Duty}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00414}00414\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x11:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00415}00415\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00416}00416\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[0]\ =\ val\ \&\ 0x3F;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00417}00417\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[0]\ =\ (64\ -\/\ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[0])\ *\ \mbox{\hyperlink{global_8h_acacf3ae89ab776bea579de1a985750fb}{clockSpeed}}\ /\ 256;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00418}00418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[0])}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00419}00419\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a36e0e70bba933777c0294e925c2fc1a2}{chan1SweepCounter}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00420}00420\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_adb89a1853d13d754ccc79720b6898909}{chanDuty}}[0]\ =\ val\ >>\ 6;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00421}00421\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1438f597aa6f9aa7fad5424f81121743}{refreshSoundDuty}}(0);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00422}00422\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(0);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00423}00423\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x11]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00424}00424\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00425}00425\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00426}00426\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Envelope\ /\ Volume}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00427}00427\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x12:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00428}00428\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[0]\ =\ val\ >>\ 4;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00429}00429\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (val\ \&\ 0x8)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00430}00430\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ad05d382a1534d6cb0c696e640541d9dc}{chanEnvDir}}[0]\ =\ 1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00431}00431\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00432}00432\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ad05d382a1534d6cb0c696e640541d9dc}{chanEnvDir}}[0]\ =\ -\/1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00433}00433\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_abe105cb88cdba915e620915ac066b40a}{chanEnvSweep}}[0]\ =\ val\ \&\ 0x7;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00434}00434\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1a55198838249003f8701c19dea17194}{refreshSoundVolume}}(0,\ \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00435}00435\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x12]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00436}00436\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00437}00437\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Frequency\ (low)}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00438}00438\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x13:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00439}00439\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[0]\ \&=\ 0x700;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00440}00440\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[0]\ |=\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00441}00441\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_adf1000445c720d5ba7d7c01fdc06d8e0}{refreshSoundFreq}}(0);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00442}00442\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(0);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00443}00443\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x13]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00444}00444\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00445}00445\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Start\ /\ Frequency\ (high)}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00446}00446\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x14:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00447}00447\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[0]\ \&=\ 0xFF;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00448}00448\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[0]\ |=\ (val\ \&\ 0x7)\ <<\ 8;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00449}00449\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_adf1000445c720d5ba7d7c01fdc06d8e0}{refreshSoundFreq}}(0);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00450}00450\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00451}00451\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (val\ \&\ 0x40)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00452}00452\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[0]\ =\ 1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00453}00453\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00454}00454\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[0]\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00455}00455\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00456}00456\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (val\ \&\ 0x80)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00457}00457\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00458}00458\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[0]\ =\ (64\ -\/\ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[0])\ *\ \mbox{\hyperlink{global_8h_acacf3ae89ab776bea579de1a985750fb}{clockSpeed}}\ /\ 256;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00459}00459\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[0])}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00460}00460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[0]);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00461}00461\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00462}00462\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ |=\ \mbox{\hyperlink{gbsnd_8cpp_ade3fc9ebc37a6e3f5bbe33e4ccfde27f}{CHAN\_1}};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00463}00463\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[0]\ =\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x12]\ >>\ 4;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00464}00464\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_a48f30c0cd799871d23eaebd139f4a992}{chan1SweepTime}}\ !=\ 0)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00465}00465\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00466}00466\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a36e0e70bba933777c0294e925c2fc1a2}{chan1SweepCounter}}\ =\ \mbox{\hyperlink{global_8h_acacf3ae89ab776bea579de1a985750fb}{clockSpeed}}\ /\ (128\ /\ \mbox{\hyperlink{gbsnd_8cpp_a48f30c0cd799871d23eaebd139f4a992}{chan1SweepTime}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00467}00467\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a36e0e70bba933777c0294e925c2fc1a2}{chan1SweepCounter}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00468}00468\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00469}00469\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a67aeb1fe2daca5e42326df8b78512058}{setChan}}(\mbox{\hyperlink{gbsnd_8cpp_ade3fc9ebc37a6e3f5bbe33e4ccfde27f}{CHAN\_1}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00470}00470\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00471}00471\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1a55198838249003f8701c19dea17194}{refreshSoundVolume}}(0,\ \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00472}00472\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a86bf1099be9bd9d1d0e29792d19cffef}{sendStartMessage}}(0);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00473}00473\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00474}00474\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00475}00475\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(0);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00476}00476\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00477}00477\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x14]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00478}00478\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00479}00479\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ CHANNEL\ 2}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00480}00480\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Length\ /\ Duty}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00481}00481\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x16:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00482}00482\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[1]\ =\ val\ \&\ 0x3F;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00483}00483\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[1]\ =\ (64\ -\/\ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[1])\ *\ \mbox{\hyperlink{global_8h_acacf3ae89ab776bea579de1a985750fb}{clockSpeed}}\ /\ 256;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00484}00484\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[1])}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00485}00485\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[1]);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00486}00486\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_adb89a1853d13d754ccc79720b6898909}{chanDuty}}[1]\ =\ val\ >>\ 6;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00487}00487\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(1);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00488}00488\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x16]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00489}00489\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00490}00490\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Volume\ /\ Envelope}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00491}00491\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x17:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00492}00492\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[1]\ =\ val\ >>\ 4;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00493}00493\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (val\ \&\ 0x8)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00494}00494\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ad05d382a1534d6cb0c696e640541d9dc}{chanEnvDir}}[1]\ =\ 1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00495}00495\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00496}00496\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ad05d382a1534d6cb0c696e640541d9dc}{chanEnvDir}}[1]\ =\ -\/1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00497}00497\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_abe105cb88cdba915e620915ac066b40a}{chanEnvSweep}}[1]\ =\ val\ \&\ 0x7;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00498}00498\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1a55198838249003f8701c19dea17194}{refreshSoundVolume}}(1,\ \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00499}00499\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x17]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00500}00500\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00501}00501\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Frequency\ (low)}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00502}00502\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x18:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00503}00503\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[1]\ \&=\ 0x700;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00504}00504\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[1]\ |=\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00505}00505\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00506}00506\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_adf1000445c720d5ba7d7c01fdc06d8e0}{refreshSoundFreq}}(1);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00507}00507\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(1);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00508}00508\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x18]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00509}00509\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00510}00510\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Start\ /\ Frequency\ (high)}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00511}00511\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x19:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00512}00512\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[1]\ \&=\ 0xFF;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00513}00513\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[1]\ |=\ (val\ \&\ 0x7)\ <<\ 8;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00514}00514\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_adf1000445c720d5ba7d7c01fdc06d8e0}{refreshSoundFreq}}(1);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00515}00515\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00516}00516\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (val\ \&\ 0x40)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00517}00517\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[1]\ =\ 1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00518}00518\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00519}00519\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[1]\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00520}00520\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00521}00521\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (val\ \&\ 0x80)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00522}00522\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00523}00523\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[1]\ =\ (64\ -\/\ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[1])\ *\ \mbox{\hyperlink{global_8h_acacf3ae89ab776bea579de1a985750fb}{clockSpeed}}\ /\ 256;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00524}00524\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[1])}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00525}00525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[1]);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00526}00526\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ |=\ \mbox{\hyperlink{gbsnd_8cpp_a3c945d4ebfdeae4b483dab407753a85d}{CHAN\_2}};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00527}00527\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[1]\ =\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x17]\ >>\ 4;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00528}00528\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a67aeb1fe2daca5e42326df8b78512058}{setChan}}(\mbox{\hyperlink{gbsnd_8cpp_a3c945d4ebfdeae4b483dab407753a85d}{CHAN\_2}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00529}00529\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00530}00530\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1a55198838249003f8701c19dea17194}{refreshSoundVolume}}(1,\ \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00531}00531\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a86bf1099be9bd9d1d0e29792d19cffef}{sendStartMessage}}(1);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00532}00532\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00533}00533\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00534}00534\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(1);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00535}00535\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00536}00536\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x19]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00537}00537\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00538}00538\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ CHANNEL\ 3}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00539}00539\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ On/Off}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00540}00540\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x1A:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00541}00541\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((val\ \&\ 0x80)\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00542}00542\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00543}00543\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ \&=\ \string~CHAN\_3;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00544}00544\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1ba110d7e8ef53c9251f4a5fd3472446}{clearChan}}(\mbox{\hyperlink{gbsnd_8cpp_ac7dcd37333d0bc309c06c31b99e6790f}{CHAN\_3}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00545}00545\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(2);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00546}00546\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00547}00547\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x1a]\ =\ val\ |\ 0x7f;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00548}00548\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00549}00549\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Length}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00550}00550\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x1B:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00551}00551\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[2]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00552}00552\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[2]\ =\ (256\ -\/\ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[2])\ *\ \mbox{\hyperlink{global_8h_acacf3ae89ab776bea579de1a985750fb}{clockSpeed}}\ /\ 256;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00553}00553\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[2])}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00554}00554\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[2]);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00555}00555\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x1b]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00556}00556\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00557}00557\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Volume}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00558}00558\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x1C:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00559}00559\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00560}00560\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[2]\ =\ (val\ >>\ 5)\ \&\ 3;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00561}00561\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[2])}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00562}00562\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00563}00563\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00564}00564\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00565}00565\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00566}00566\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[2]\ =\ 15;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00567}00567\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00568}00568\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00569}00569\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[2]\ =\ 15\ >>\ 1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00570}00570\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00571}00571\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00572}00572\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[2]\ =\ 15\ >>\ 2;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00573}00573\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00574}00574\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00575}00575\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1a55198838249003f8701c19dea17194}{refreshSoundVolume}}(2,\ \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00576}00576\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x1c]\ =\ val\ |\ 0x9f;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00577}00577\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00578}00578\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00579}00579\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Frequency\ (low)}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00580}00580\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x1D:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00581}00581\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[2]\ \&=\ 0xFF00;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00582}00582\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[2]\ |=\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00583}00583\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_adf1000445c720d5ba7d7c01fdc06d8e0}{refreshSoundFreq}}(2);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00584}00584\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(2);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00585}00585\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x1d]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00586}00586\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00587}00587\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Start\ /\ Frequency\ (high)}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00588}00588\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x1E:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00589}00589\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[2]\ \&=\ 0xFF;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00590}00590\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[2]\ |=\ (val\ \&\ 7)\ <<\ 8;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00591}00591\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_adf1000445c720d5ba7d7c01fdc06d8e0}{refreshSoundFreq}}(2);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00592}00592\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00593}00593\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (val\ \&\ 0x40)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00594}00594\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[2]\ =\ 1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00595}00595\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00596}00596\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[2]\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00597}00597\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00598}00598\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((val\ \&\ 0x80)\ \&\&\ (\mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x1a]\ \&\ 0x80))}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00599}00599\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00600}00600\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ |=\ \mbox{\hyperlink{gbsnd_8cpp_ac7dcd37333d0bc309c06c31b99e6790f}{CHAN\_3}};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00601}00601\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[2]\ =\ (256\ -\/\ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[2])\ *\ \mbox{\hyperlink{global_8h_acacf3ae89ab776bea579de1a985750fb}{clockSpeed}}\ /\ 256;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00602}00602\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[2])}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00603}00603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[2]);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00604}00604\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a67aeb1fe2daca5e42326df8b78512058}{setChan}}(\mbox{\hyperlink{gbsnd_8cpp_ac7dcd37333d0bc309c06c31b99e6790f}{CHAN\_3}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00605}00605\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00606}00606\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1a55198838249003f8701c19dea17194}{refreshSoundVolume}}(2,\ \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00607}00607\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a86bf1099be9bd9d1d0e29792d19cffef}{sendStartMessage}}(2);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00608}00608\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00609}00609\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00610}00610\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00611}00611\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(2);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00612}00612\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00613}00613\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x1e]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00614}00614\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00615}00615\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ CHANNEL\ 4}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00616}00616\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Length}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00617}00617\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x20:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00618}00618\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[3]\ =\ val\ \&\ 0x3F;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00619}00619\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[3]\ =\ (64\ -\/\ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[3])\ *\ \mbox{\hyperlink{global_8h_acacf3ae89ab776bea579de1a985750fb}{clockSpeed}}\ /\ 256;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00620}00620\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[3])}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00621}00621\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[3]);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00622}00622\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x20]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00623}00623\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00624}00624\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Volume\ /\ Envelope}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00625}00625\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x21:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00626}00626\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[3]\ =\ val\ >>\ 4;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00627}00627\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (val\ \&\ 0x8)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00628}00628\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ad05d382a1534d6cb0c696e640541d9dc}{chanEnvDir}}[3]\ =\ 1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00629}00629\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00630}00630\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ad05d382a1534d6cb0c696e640541d9dc}{chanEnvDir}}[3]\ =\ -\/1;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00631}00631\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_abe105cb88cdba915e620915ac066b40a}{chanEnvSweep}}[3]\ =\ val\ \&\ 0x7;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00632}00632\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1a55198838249003f8701c19dea17194}{refreshSoundVolume}}(3,\ \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00633}00633\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x21]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00634}00634\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00635}00635\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Frequency}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00636}00636\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x22:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00637}00637\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x22]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00638}00638\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_aaf96273143a904564196387ee312d986}{chanFreq}}[3]\ =\ val\ >>\ 4;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00639}00639\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4f11e9de416ac411cef0b2abc96203bb}{chan4FreqRatio}}\ =\ val\ \&\ 0x7;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00640}00640\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_a4f11e9de416ac411cef0b2abc96203bb}{chan4FreqRatio}}\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00641}00641\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4f11e9de416ac411cef0b2abc96203bb}{chan4FreqRatio}}\ =\ 0.5;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00642}00642\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_a8b33d9df4ca68bf18116d475ee8eefec}{lfsr7Bit}}\ =\ val\ \&\ 0x8;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00643}00643\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_adf1000445c720d5ba7d7c01fdc06d8e0}{refreshSoundFreq}}(3);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00644}00644\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(3);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00645}00645\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00646}00646\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Start}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00647}00647\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x23:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00648}00648\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[3]\ =\ !!(val\ \&\ 0x40);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00649}00649\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (val\ \&\ 0x80)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00650}00650\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00651}00651\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[3]\ =\ (64\ -\/\ \mbox{\hyperlink{gbsnd_8cpp_a08b4d457b899c9d58eb0ce668a9075cf}{chanLen}}[3])\ *\ \mbox{\hyperlink{global_8h_acacf3ae89ab776bea579de1a985750fb}{clockSpeed}}\ /\ 256;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00652}00652\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{gbsnd_8cpp_ae01c8bdea5a32925d608ddd01db8347d}{chanUseLen}}[3])}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00653}00653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a8ea718f12dce6ab219b9105c1d22b385}{setSoundEventCycles}}(\mbox{\hyperlink{gbsnd_8cpp_a0856fdd490c40415db6e981ea79a6940}{chanLenCounter}}[3]);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00654}00654\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ |=\ \mbox{\hyperlink{gbsnd_8cpp_a5545112d67b69cd81aee836009cfaa8f}{CHAN\_4}};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00655}00655\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a67aeb1fe2daca5e42326df8b78512058}{setChan}}(\mbox{\hyperlink{gbsnd_8cpp_a5545112d67b69cd81aee836009cfaa8f}{CHAN\_4}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00656}00656\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a4e31c3ea179ff2e067d79e888b3ce855}{chanVol}}[3]\ =\ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x21]\ >>\ 4;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00657}00657\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1a55198838249003f8701c19dea17194}{refreshSoundVolume}}(3,\ \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00658}00658\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a86bf1099be9bd9d1d0e29792d19cffef}{sendStartMessage}}(3);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00659}00659\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00660}00660\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x23]\ =\ val\ |\ 0x3f;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00661}00661\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00662}00662\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ GENERAL\ REGISTERS}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00663}00663\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x24:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00664}00664\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af236d9c76a4a381e084c31147d098b64}{volControl}}\ \&\ 0x7)\ !=\ (val\ \&\ 0x7))}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00665}00665\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00666}00666\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af236d9c76a4a381e084c31147d098b64}{volControl}}\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00667}00667\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a080ae19c86b09346d784904b475e6a9b}{sendGlobalVolumeMessage}}();}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00668}00668\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00669}00669\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00670}00670\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af236d9c76a4a381e084c31147d098b64}{volControl}}\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00671}00671\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x24]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00672}00672\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00673}00673\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x25:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00674}00674\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_ad17b2ef59c3309fdb7e6ec80575dae5c}{chanOutput}}\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00675}00675\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 4;\ i++)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00676}00676\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a04955e31135de1385d2ad25880e21dfe}{refreshSoundPan}}(i);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00677}00677\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(-\/1);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00678}00678\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a080ae19c86b09346d784904b475e6a9b}{sendGlobalVolumeMessage}}();}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00679}00679\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x25]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00680}00680\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00681}00681\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x26:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00682}00682\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x26]\ \&=\ 0x7F;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00683}00683\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[0x26]\ |=\ val\ \&\ 0x80;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00684}00684\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(val\ \&\ 0x80))}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00685}00685\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00686}00686\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a2bb32c52cb5d21be737aaa2aefb353d4}{sharedData}}-\/>\mbox{\hyperlink{struct_shared_data_af5b7afec609c180e9d03dc87a9ce59ce}{chanOn}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00687}00687\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00688}00688\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1ba110d7e8ef53c9251f4a5fd3472446}{clearChan}}(\mbox{\hyperlink{gbsnd_8cpp_ade3fc9ebc37a6e3f5bbe33e4ccfde27f}{CHAN\_1}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00689}00689\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1ba110d7e8ef53c9251f4a5fd3472446}{clearChan}}(\mbox{\hyperlink{gbsnd_8cpp_a3c945d4ebfdeae4b483dab407753a85d}{CHAN\_2}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00690}00690\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1ba110d7e8ef53c9251f4a5fd3472446}{clearChan}}(\mbox{\hyperlink{gbsnd_8cpp_ac7dcd37333d0bc309c06c31b99e6790f}{CHAN\_3}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00691}00691\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_a1ba110d7e8ef53c9251f4a5fd3472446}{clearChan}}(\mbox{\hyperlink{gbsnd_8cpp_a5545112d67b69cd81aee836009cfaa8f}{CHAN\_4}});}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00692}00692\ }
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00693}00693\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ reg\ =\ 0x10;\ reg\ <=\ 0x25;\ reg++)}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00694}00694\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[reg]\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00695}00695\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8cpp_ae6087b8016bf191702d5fa5a201771e9}{sendUpdateMessage}}(-\/1);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00696}00696\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00697}00697\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00698}00698\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x30:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00699}00699\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x31:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00700}00700\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x32:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00701}00701\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x33:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00702}00702\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x34:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00703}00703\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x35:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00704}00704\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x36:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00705}00705\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x37:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00706}00706\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x38:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00707}00707\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x39:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00708}00708\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x3A:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00709}00709\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x3B:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00710}00710\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x3C:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00711}00711\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x3D:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00712}00712\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x3E:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00713}00713\ \ \ \ \ \textcolor{keywordflow}{case}\ 0x3F:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00714}00714\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[ioReg]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00715}00715\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gbsnd_8h_adf56904dd8cd20559b11887998ce5e88}{updateSoundSample}}(ioReg\ -\/\ 0x30);}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00716}00716\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00717}00717\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00718}00718\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mmu_8h_a7436ad149c3b3f2974966d6b546d14d9}{ioRam}}[ioReg]\ =\ val;}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00719}00719\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00720}00720\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gbsnd_8cpp_source_l00721}00721\ \}}

\end{DoxyCode}
